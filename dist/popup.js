(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("errorDisplay"),t=document.getElementById("ipDisplay"),o=document.getElementById("logDisplay"),s=document.getElementById("sendButton");s&&s.addEventListener("click",(()=>{chrome.runtime.sendMessage({action:"logIpWithPrefix"},(e=>{e&&"success"===e.status?(console.log("Request to log IP was successful."),m()):console.error("Failed to request log IP.")}))})),chrome.storage.local.get(["prefixB","prefixC"],(e=>{e.prefixB||chrome.storage.local.set({prefixB:"noc"}),e.prefixC||chrome.storage.local.set({prefixC:"aur"})}));const n=document.getElementById("prefixA"),a=document.getElementById("savePrefixA"),l=document.getElementById("prefixB"),r=document.getElementById("toggleStateB"),c=document.getElementById("stateBDisplay"),i=document.getElementById("prefixC"),g=document.getElementById("toggleStateC"),d=document.getElementById("stateCDisplay");function m(){chrome.storage.local.get("logs",(e=>{const t=e.logs||[];o.innerHTML=t.map((e=>`<p>[${e.timestamp}] ${e.message}</p>`)).join("")}))}chrome.storage.local.get(["prefixA","prefixB","stateB","prefixC","stateC"],(e=>{n.value=e.prefixA||"",l.value=e.prefixB||"",i.value=e.prefixC||"",c&&(c.innerText=`State: ${e.stateB||"F"}`),d&&(d.innerText=`State: ${e.stateC||"F"}`)})),null==a||a.addEventListener("click",(()=>{const e=n.value;chrome.storage.local.set({prefixA:e},(()=>{console.log("Prefix A saved:",e)}))})),null==r||r.addEventListener("click",(()=>{chrome.storage.local.get("stateB",(e=>{const t="B"===e.stateB?"F":"B";chrome.storage.local.set({stateB:t},(()=>{c&&(c.innerText=`State: ${t}`),console.log("State B toggled to:",t)}))}))})),null==g||g.addEventListener("click",(()=>{chrome.storage.local.get("stateC",(e=>{const t="B"===e.stateC?"F":"B";chrome.storage.local.set({stateC:t},(()=>{d&&(d.innerText=`State: ${t}`),console.log("State C toggled to:",t)}))}))})),l.addEventListener("change",(()=>{const e=l.value;chrome.storage.local.set({prefixB:e},(()=>{console.log("Prefix B saved:",e)}))})),i.addEventListener("change",(()=>{const e=i.value;chrome.storage.local.set({prefixC:e},(()=>{console.log("Prefix C saved:",e)}))})),fetch("https://api.ipify.org?format=json").then((e=>e.json())).then((e=>{t.textContent=`Your IP: ${e.ip}`})).catch((t=>{console.error(t),e.textContent="Error fetching IP address. Please try again."})),chrome.storage.local.get("logs",(e=>{const t=e.logs||[];o.innerHTML=t.map((e=>`<p>[${e.timestamp}] ${e.message}</p>`)).join("")})),m()}))})();