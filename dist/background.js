(()=>{"use strict";var e={28:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.API_KEY=void 0,t.API_KEY="39e29c28f20e897a03b40af708c59ffd22ae69e079de471872ca93ebd3bd6819"}},t={};function o(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}(()=>{const e=o(28);function t(){chrome.storage.local.get("profilePrefix",(t=>{if(t.profilePrefix)fetch("https://api.ipify.org?format=json").then((e=>e.json())).then((o=>{if(["192.168.0.1","127.0.0.1"].includes(o.ip)){const e=`IP ${o.ip} is in the exclusion list. Data not sent.`;console.log(e),r(e)}else!function(t,o){const s=(new Date).toISOString();fetch("https://vercel-node-server-api.vercel.app/api/store-ip",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":e.API_KEY},body:JSON.stringify({prefix:t,ip:o,timestamp:s})}).then((e=>{if(!e.ok)throw new Error(`Server responded with status: ${e.status}`);return e.json()})).then((e=>{const t=`Data sent to server: ${JSON.stringify(e)}`;console.log(t),r(t)})).catch((e=>{const t=`Error sending data to server: ${e.message}`;console.error(t),r(t)}))}(t.profilePrefix,o.ip)})).catch((e=>{const t=`Error fetching IP: ${e.message}`;console.error(t),r(t)}));else{const e="No prefix found in storage.";console.log(e),r(e)}}))}function r(e){chrome.storage.local.get("logs",(t=>{const o=t.logs||[];o.push({message:e,timestamp:(new Date).toISOString()}),chrome.storage.local.set({logs:o},(()=>{console.log("Log saved:",e)}))}))}chrome.tabs.onUpdated.addListener(((e,o,r)=>{"complete"===o.status&&t()})),chrome.runtime.onStartup.addListener((()=>{t()}))})()})();