(()=>{"use strict";var e={28:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EXCLUDED_IPS=t.API_KEY=void 0,t.API_KEY="39e29c28f20e897a03b40af708c59ffd22ae69e079de471872ca93ebd3bd6819",t.EXCLUDED_IPS="93.35.139.122, 93.35.139.123"}},t={};function r(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,r),n.exports}(()=>{const e=r(28);function t(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`}function s(e){const r=t(new Date);chrome.storage.local.get("logs",(t=>{const s=t.logs||[];s.unshift({message:e,timestamp:r}),chrome.storage.local.set({logs:s},(()=>{console.log("Log saved:",e)}))}))}chrome.runtime.onMessage.addListener(((r,o,n)=>{"logIpWithPrefix"===r.action&&(chrome.storage.local.get(["prefixA","prefixB","stateB","prefixC","stateC"],(r=>{if(r.prefixA||r.prefixB||r.prefixC)fetch("https://api.ipify.org?format=json").then((e=>e.json())).then((o=>{if((e.EXCLUDED_IPS?e.EXCLUDED_IPS.split(","):[]).includes(o.ip)){const e="IP is in the exclusion list. Data not sent.";console.log(e),s(e)}else!function(r,o,n,i,a,c){const p={prefixA:r,prefixB:o,prefixC:n,stateB:i,stateC:a,ip:c,timestamp:t(new Date)};fetch("https://vercel-node-server-api.vercel.app/api/store-ip",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":e.API_KEY},body:JSON.stringify(p)}).then((e=>{if(!e.ok)throw new Error(`Server responded with status: ${e.status}`);return e.json()})).then((e=>{const t=`Data sent to server: ${JSON.stringify(e)}`;console.log(t),s(t)})).catch((e=>{const t=`Error sending data to server: ${e.message}`;console.error(t),s(t)}))}(r.prefixA,r.prefixB,r.prefixC,r.stateB,r.stateC,o.ip)})).catch((e=>{const t=`Error fetching IP: ${e.message}`;console.error(t),s(t)}));else{const e="No prefixes found in storage.";console.log(e),s(e)}})),n({status:"success"}))}))})()})();